{% extends "open_base.html" %}
{% block titlecontainer %}
  <div class="w3-container">
{% endblock %}

{% block titleheader %}
  Live scroll {{ valgt_klasse }}
{% endblock %}

{% block headercontainer %}Live resultater {{ valgt_klasse }} <img id=header_icon src="../static/icon_live.png"> {% endblock %}

{% block refresh %}60{% endblock %}

{% block titlemain %}
  <img id=menu_icon src="../static/icon_live.png"> Live scroll {{ valgt_klasse }}
{% endblock %}

{% block menuitems %}
  <li class=dropdown id=topborder>
    <a href=javascript:void(0) class=dropbtn>Velg klasse</a>
    <div class=dropdown-content>
      {% for klasse in raceclasses %}
        {% if klasse.ranking %}
          {% for ac_name in klasse.ageclasses %}
            <a href=live?klasse={{ klasse.name }}&event_id={{ event_id }}>{{ ac_name }}</a>
          {% endfor %}
        {% endif %}
      {% endfor %}
    </div>
  </li>
{% endblock %}

{% block content %}
  <div id=spacer></div>
  <div class="w3-row-padding">
    <div class="{{ colclass }}">
      {% if valgt_startnr %}
        <div align=center><b>Startnummer {{ valgt_startnr }}</b></div>
      {% endif %}
      <table>
        {% for race in races %}
            {% if loop.index0 == 0 %}
              <div id=subheaderbold>{% if race.round == "Q" %}Kvartfinaler
              {% elif race.round == "S" %}Semifinaler
              {% elif race.round == "F" %}Finaler
              {% endif %}</div>
            {% elif race.order in colseparators %}
                </table>
              </div>
              <div class="{{ colclass }}">
                <div id=subheaderbold>{% if race.round == "Q" %}Kvartfinaler
                {% elif race.round == "S" %}Semifinaler
                {% elif race.round == "F" %}Finaler
                {% endif %}</div>
                <table>
            {% endif %}
            {% if race.finish_results|length > 0 %}
              <tr id=headerblack>
                <td colspan=4>
                  <b>{{ race.raceclass }}
                  {% if race.round == "Q" %}{{ race.round }}{{ race.heat }}
                  {% else %}{{ race.round }}{{ race.index }}{{ race.heat }}
                  {% endif %} - Resultat</b>
                  {% if race.results.Finish.status == 1 %} -- NB: RESULTATER IKKE BEKREFTET {% endif %}
                </td>
                <td>(heat {{ race.order }})</td>
              </tr>
              <tr id=subheader>
                <td width=50><div id={{ race.order }} >Plass</div></td>
                <td width=50>Nr</td>
                <td width=30></td>
                <td>Løper</td>
                {% if race.round == "F" %}
                  <td></td>
                {% else %}
                  <td>Neste</td>
                {% endif %}
              </tr>
              {% for loper in race.finish_results %}
                  <tr{% if loper.bib == valgt_startnr %} id=black{% endif %}>
                    <td align=center id=table_border>{{ loper.rank }}</td>
                    <td align=center>{{ loper.bib }}</td>
                    <td align=center>{% if loper.club_logo %}<img width=20 src={{ loper.club_logo }}>{% endif %}</td>
                    <td>
                        <a href=live?klasse={{ valgt_klasse }}&startnr={{ loper.bib }}&event_id={{ event_id }}>{{ loper.name }}</a>
                        <br><div id=smalltext>{{ loper.club }}</div>
                    </td>
                    <td align=center id=table_border>{% if race.round != "F" %}{{ loper.next_race }}{% endif %}</td>
                  </tr>
              {% endfor %}
            {% else %}
              <tr id=headerblue>
                <td colspan=4>
                  <b>{{ race.raceclass }}
                  {% if race.round == "Q" %}{{ race.round }}{{ race.heat }}
                  {% else %}{{ race.round }}{{ race.index }}{{ race.heat }}
                  {% endif %} - Kl. {{ race.start_time }}</b>
                </td>
                <td>(heat {{ race.order }})</td>
              </tr>
              <tr id=subheader>
                <td width=50><div id={{ race.order }} >Pos</div></td>
                <td width=50>Nr</td>
                <td width=30></td>
                <td>Løper</td>
                <td></td>
               </tr>
               {% for loper in race.start_entries %}
                  <tr{% if loper.bib == valgt_startnr %} id=black{% endif %}>
                     <td align=center id=table_border>{{ loper.starting_position }}</td>
                     <td align=center>{{ loper.bib }}</td>
                     <td align=center>{% if loper.club_logo %}<img width=20 src={{ loper.club_logo }}>{% endif %}</td>
                     <td>
                       <a href=live?klasse={{ valgt_klasse }}&startnr={{ loper.bib }}&event_id={{ event_id }}>{{ loper.name }}</a>
                       <br><div id=smalltext>{{ loper.club }}</div>
                     </td>
                     <td id=table_border></td>
                   </tr>
               {% endfor %}
            {% endif %}
            <tr>
               <td colspan=5 id=white height=25></td>
             </tr>
        {% endfor %}
      </table>
    </div>
  </div>
{% endblock %}
