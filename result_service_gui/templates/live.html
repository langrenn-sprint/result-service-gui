{% extends "open_base.html" %}
{% block titlecontainer %}
  <div class="w3-container">
{% endblock %}

{% block titleheader %}
  Live scroll {{ valgt_startnr }}{{ valgt_klasse }}
{% endblock %}

{% block refresh %}60{% endblock %}

{% block titlemain %}
  Live scroll {{ valgt_startnr }} {{ valgt_klasse }}
{% endblock %}

{% block menuitems %}
  <li class=dropdown id=topborder>
    <a href=javascript:void(0) class=dropbtn>Velg klasse</a>
    <div class=dropdown-content>
      {% for klasse in raceclasses %}
        <a href=live?klasse={{ klasse.name }}&event_id={{ event_id }}>{{ klasse.ageclass_name }}</a>
      {% endfor %}
    </div>
  </li>
  <li class=dropdown id=topborder>
    <a href=javascript:void(0) class=dropbtn>Velg løper</a>
    <div class=dropdown-content>
      {% if valgt_klasse == "" %}
        <a href=live>Velg klasse først</a>
      {% else %}
        <a href=live?klasse={{ valgt_klasse }}&event_id={{ event_id }}>Alle</a>
        {% for deltaker in contestants %}
          <a href=live?klasse={{ valgt_klasse }}&startnr={{ deltaker.bib }}&event_id={{ event_id }}>{{ deltaker.bib }} {{ deltaker.first_name }} {{ deltaker.last_name }}</a>
        {% endfor %}
      {% endif %}
    </div>
  </li>
{% endblock %}

{% block content %}
  <div id=spacer></div>
  <div class="w3-row-padding">
    <div class="{{ colclass }}">
      <table>
        {% for race in races %}
            {% if race.order in colseparators %}
                </table>
              </div>
              <div class="{{ colclass }}">
                <table>
            {% endif %}
            {% if race.finish_results|length > 0 %}
              <tr id=headerblack>
                <td colspan=5>
                  Resultater <b>{{ race.raceclass }}
                  {% if race.round == "Q" %}Kvartfinale {{ race.heat }}
                  {% elif race.round == "S" %}Semifinale {{ race.index }}{{ race.heat }}
                  {% elif race.round == "F" %}Finale {{ race.index }}
                  {% endif %}</b>
                  ({{ race.order }})
                </td>
              </tr>
              <tr id=subheader>
                <td align=center><div id={{ race.order }} >Plass</div></td>
                <td>Nr</td>
                <td>Navn</td>
                <td>Klubb</td>
                {% if race.round == "F" %}
                  <td></td>
                {% else %}
                  <td>Neste</td>
                {% endif %}
              </tr>
              {% for loper in race.finish_results %}
                  <tr{% if loper.bib == valgt_startnr %} id=black{% endif %}>
                    <td align=center>{{ loper.rank }}</td>
                    <td>{{ loper.bib }}</td>
                    <td>{{ loper.name }}</td>
                    <td>{{ loper.club }}</td>
                    {% if race.round == "F" %}
                      <td></td>
                    {% else %}
                      <td>{{ loper.next_race }}</td>
                    {% endif %}
                  </tr>
              {% endfor %}
            {% else %}
              <tr id=headerblue>
                <td colspan=3>Start <b>{{ race.raceclass }}
                  {% if race.round == "Q" %}
                    Kvartfinale {{ race.heat }}
                  {% elif race.round == "S" %}
                    Semifinale {{ race.index }}{{ race.heat }}
                  {% elif race.round == "F" %}
                    Finale {{ race.index }}
                  {% endif %}</b>
                   ({{ race.order }})
                </td>
                <td colspan=2>Kl. {{ race.start_time }}</td>
              </tr>
              <tr id=subheader>
                <td align=center><div id={{ race.order }} >Pos</div></td>
                <td>Nr</td>
                <td>Navn</td>
                <td>Klubb</td>
                <td></td>
               </tr>
               {% for loper in race.start_entries %}
                  <tr{% if loper.bib == valgt_startnr %} id=black{% endif %}>
                     <td align=center>{{ loop.index }}</td>
                     <td>{{ loper.bib }}</td>
                     <td>{{ loper.name }}</td>
                     <td colspan=2>{{ loper.club }}</td>
                   </tr>
               {% endfor %}
            {% endif %}
            <tr>
               <td colspan=5 id=white>&nbsp;</td>
             </tr>
        {% endfor %}
      </table>
    </div>
  </div>
{% endblock %}
