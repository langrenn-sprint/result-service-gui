{% extends "print_base.html" %}
{% block titlecontainer %}
  <div class="w3-10"></div>
  <div class="w3-80">
{% endblock %}

{% block titleheader %}
  Utskrift {{ valgt_klubb }}{{ valgt_klasse }}
{% endblock %}

{% block refresh %}0{% endblock %}

{% block content %}
<div class="w3-container" id=info>{{ informasjon }}</div>
<table>
    {% for race in races %}
      {% if race.first_in_class %}
        </table>
          {% if not loop.first %}
            <div id=pagebreak></div>
          {% endif %}
          <div id=adminpagetitle>
            {% if action == "live" %}
              Live resultater <img id=header_icon src="../static/icon_live.png"> {{ race.raceclass }}
            {% elif race.list_type == "start" %}
              Startliste <img id=header_icon src="../static/icon_start.png"> {{ race.raceclass }}
              {% if valgt_runde == "Q"%}semifinaler
              {% elif valgt_runde == "S"%}finaler
              {% endif %}
            {% else %}
              Resultater <img id=header_icon src="../static/icon_result.png"> {{ race.raceclass }}
              {% if valgt_runde == "Q"%}kvartfinaler
              {% elif valgt_runde == "S"%}semifinaler
              {% elif valgt_runde == "F"%}finaler
              {% endif %}
            {% endif %}
          </div>
          <div align=right>{{ event.name }}, {{ event.date_of_event }}</div>
          {% if raceplan_summary|length > 0 %}
            <table>
              <tr id=spacer></tr>
              <tr id=headerprint>
                <td>LÃ¸psklasse</td>
                <td>Kvartfinale start</td>
                <td>Semifinaler</td>
                <td>Finaler</td>
                <td>Antall deltakere</td>
              </tr>
              {% for raceclass in raceplan_summary %}
                {% if raceclass.name == race.raceclass %}
                  <tr>
                    <td>{{ raceclass.name }}</td>
                    <td>{{ raceclass.timeQ }}</td>
                    <td>{{ raceclass.timeS }}</td>
                    <td>{{ raceclass.timeF }}</td>
                    <td>{{ raceclass.no_of_contestants }}</td>
                  </tr>
                {% endif %}
              {% endfor %}
              <tr id=spacer></tr>
            </table>
          {% endif %}
        <table>
      {% endif %} {# end create header #}

      {# print startlist if start-entries #}
      {% if race.list_type == "start" and race.startliste %}
        <tr id=headerprint>
          <td colspan=3>Kl. {{ race.start_time }} {{ race.raceclass }}
            {% if race.round == "Q" %}Kvart {{ race.heat }}
            {% elif race.round == "S" %}Semi {{ race.index }}{{ race.heat }}
            {% elif race.round == "F" %}Finale {{ race.index }}
            {% endif %}
            {% if race.round == "F" %}
              ({{ race.raceclass }}{{ race.round }}{{ race.index }})
            {% else %}
              ({{ race.raceclass }}{{ race.round }}{{ race.index }}{{ race.heat }})
            {% endif %}
          </td>
          <td>{% if race.round != "F" %}Neste heat: {{ race.next_race }}{% endif %}</td>
          <td></td>
        </tr>
        {% for loper in race.startliste %}
            <tr>
              <td align="center">{{ loper.starting_position }}</td>
              <td align="center"><div id={{ loper.bib }}></div>{{ loper.bib }}</td>
              <td>{{ loper.name }}</td>
              <td>{{ loper.club }}{% if loper.team %} / {{ loper.team }}{% endif %}</td>
              <td></td>
            </tr>
        {% endfor %}
        <tr id=tablespacer><td>&nbsp;</td></tr>
      {# print results #}
      {% elif race.list_type in ("live", "result") %} 
        <tr id=headerprint>
          <td colspan=3>
            Resultater {{ race.raceclass }}
            {% if race.round == "Q" %}Kvart {{ race.heat }}
            {% elif race.round == "S" %}Semi {{ race.index }}{{ race.heat }}
            {% elif race.round == "F" %}Finale {{ race.index }}
            {% endif %}
            {% if race.round == "F" %}
              ({{ race.raceclass }}{{ race.round }}{{ race.index }})
            {% else %}
              ({{ race.raceclass }}{{ race.round }}{{ race.index }}{{ race.heat }})
            {% endif %}
            </td>
          <td></td>
          {% if race.round == "F" %}
            <td></td>
          {% else %}
            <td>Videre til</td>
          {% endif %}
        </tr>
        {% for loper in race.finish_results %}
          <tr{% if loper.bib == valgt_startnr %} id=black{% endif %}>
            <td align="center">{{ loper.rank }}{% if loper.status != "OK" %} {{ loper.status }}{% endif %}</td>
            <td align="center">{{ loper.bib }}</td>
            <td>{{ loper.name }}</td>
            <td>{{ loper.club }}{% if loper.team %} / {{ loper.team }}{% endif %}</td>
            <td>
              {% if race.round != "F" %} {{ loper.next_race }}{% endif %}
            </td>
          </tr>
        {% endfor %}
      {% endif %}
    {% endfor %}
  </table>
{% endblock %}
